<div class="container mx-auto p-4">
    @if (referencia$ | async; as referencia) {
        <p-card>
            <ng-template pTemplate="header">
                <div class="flex justify-between items-center p-4">
                    <h2 class="text-2xl font-bold">{{ referencia.referencia }}</h2>
                    <div class="flex gap-2">
                        <p-button
                            label="Editar"
                            icon="pi pi-pencil"
                            severity="warn"
                            (onClick)="editarReferencia()">
                        </p-button>
                        <p-button
                            label="Volver"
                            icon="pi pi-arrow-left"
                            severity="secondary"
                            [text]="true"
                            (onClick)="volver()">
                        </p-button>
                    </div>
                </div>
            </ng-template>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Información Básica -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Información Básica</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="text-sm font-medium text-gray-600">ID</label>
                            <p class="text-base">{{ referencia.id }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-medium text-gray-600">Referencia</label>
                            <p class="text-base font-semibold">{{ referencia.referencia }}</p>
                        </div>
                        <div>
                            <label class="text-sm font-medium text-gray-600">Marca</label>
                            <p class="text-base">{{ referencia.marca?.nombre || '-' }}</p>
                        </div>
                        @if (referencia.comentario) {
                            <div>
                                <label class="text-sm font-medium text-gray-600">Comentario</label>
                                <p class="text-base whitespace-pre-wrap">{{ referencia.comentario }}</p>
                            </div>
                        }
                    </div>
                </div>

                <!-- Relaciones -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Relaciones</h3>
                    <div class="space-y-4">
                        @if (referencia.articulos && referencia.articulos.length > 0) {
                            <div>
                                <label class="text-sm font-medium text-gray-600">Artículos Asociados</label>
                                <p class="text-base">{{ referencia.articulos.length }} artículo(s)</p>
                            </div>
                        }
                        @if (referencia.categoria) {
                            <div>
                                <label class="text-sm font-medium text-gray-600">Categoría</label>
                                <p class="text-base">{{ referencia.categoria.nombre || '-' }}</p>
                            </div>
                        }
                    </div>
                </div>
            </div>

            <p-divider />

            <!-- Fechas -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                <div>
                    <label class="text-sm font-medium text-gray-600">Fecha de Creación</label>
                    <p class="text-base">{{ referencia.created_at | date:'medium' }}</p>
                </div>
                <div>
                    <label class="text-sm font-medium text-gray-600">Última Actualización</label>
                    <p class="text-base">{{ referencia.updated_at | date:'medium' }}</p>
                </div>
            </div>
        </p-card>
    } @else {
        <p-card>
            <div class="text-center py-8">
                <i class="pi pi-spin pi-spinner text-4xl text-gray-400"></i>
                <p class="text-gray-600 mt-4">Cargando referencia...</p>
            </div>
        </p-card>
    }
</div>
