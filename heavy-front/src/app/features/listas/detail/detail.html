<div class="container mx-auto p-4">
    @if (lista$ | async; as lista) {
        <p-card>
            <ng-template pTemplate="header">
                <div class="flex justify-between items-center p-4">
                    <h2 class="text-2xl font-bold">Detalle de Lista</h2>
                    <div class="flex gap-2">
                        <p-button
                            label="Editar"
                            icon="pi pi-pencil"
                            severity="warn"
                            (onClick)="editarLista()">
                        </p-button>
                        <p-button
                            label="Volver"
                            icon="pi pi-arrow-left"
                            severity="secondary"
                            [text]="true"
                            (onClick)="volver()">
                        </p-button>
                    </div>
                </div>
            </ng-template>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Información Básica -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Información Básica</h3>
                    
                    <div class="field mb-4">
                        <label class="block text-sm font-medium text-gray-600 mb-1">ID</label>
                        <p class="text-base">{{ lista.id }}</p>
                    </div>

                    <div class="field mb-4">
                        <label class="block text-sm font-medium text-gray-600 mb-1">Tipo</label>
                        <p-tag
                            [value]="lista.tipo"
                            [severity]="getTipoSeverity(lista.tipo)">
                        </p-tag>
                    </div>

                    <div class="field mb-4">
                        <label class="block text-sm font-medium text-gray-600 mb-1">Nombre</label>
                        <p class="text-base font-semibold">{{ lista.nombre }}</p>
                    </div>

                    @if (lista.definicion) {
                        <div class="field mb-4">
                            <label class="block text-sm font-medium text-gray-600 mb-1">Definición</label>
                            <p class="text-base whitespace-pre-wrap">{{ lista.definicion }}</p>
                        </div>
                    }
                </div>

                <!-- Imágenes y Fechas -->
                <div>
                    <h3 class="text-lg font-semibold mb-4">Imágenes</h3>
                    
                    @if (lista.foto) {
                        <div class="field mb-4">
                            <label class="block text-sm font-medium text-gray-600 mb-1">Foto</label>
                            <img [src]="lista.foto" [alt]="lista.nombre" class="w-full max-w-md h-auto rounded" />
                        </div>
                    }

                    @if (lista.fotoMedida) {
                        <div class="field mb-4">
                            <label class="block text-sm font-medium text-gray-600 mb-1">Foto Medida</label>
                            <img [src]="lista.fotoMedida" [alt]="lista.nombre + ' - Medida'" class="w-full max-w-md h-auto rounded" />
                        </div>
                    }

                    @if (!lista.foto && !lista.fotoMedida) {
                        <p class="text-gray-400">No hay imágenes disponibles</p>
                    }
                </div>
            </div>

            <p-divider />

            <!-- Fechas -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                <div class="field">
                    <label class="block text-sm font-medium text-gray-600 mb-1">Fecha de Creación</label>
                    <p class="text-base">{{ lista.created_at | date:'medium' }}</p>
                </div>
                <div class="field">
                    <label class="block text-sm font-medium text-gray-600 mb-1">Última Actualización</label>
                    <p class="text-base">{{ lista.updated_at | date:'medium' }}</p>
                </div>
                @if (lista.deleted_at) {
                    <div class="field">
                        <label class="block text-sm font-medium text-gray-600 mb-1">Fecha de Eliminación</label>
                        <p class="text-base text-red-500">{{ lista.deleted_at | date:'medium' }}</p>
                    </div>
                }
            </div>
        </p-card>
    } @else {
        <p-card>
            <div class="text-center py-8">
                <i class="pi pi-spin pi-spinner text-4xl text-gray-400 mb-2"></i>
                <p class="text-gray-600">Cargando lista...</p>
            </div>
        </p-card>
    }
</div>
